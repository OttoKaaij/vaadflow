package it.algos.@MODULELOWER@.application;

import it.algos.vaadbase.application.BaseCost;
import it.algos.vaadbase.boot.ABoot;
import it.algos.vaadbase.wizard.ui.WizardView;
import it.algos.vaadbase.annotation.AIScript;
import com.vaadin.flow.spring.annotation.SpringComponent;
import org.springframework.context.annotation.Scope;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.event.ContextRefreshedEvent;
import org.springframework.context.event.EventListener;

/**
 * Project @MODULELOWER@
 * Created by Algos
 * User: gac
 * Date: ven, 8-mag-2018
 * <p>
 * Estende la classe ABoot per le regolazioni iniziali di questa applicazione <br>
 * Running logic after the Spring context has been initialized
 * The method onApplicationEvent() will be executed before the application is up and <br>
 * Aggiunge tutte le @Route (views) standard e specifiche di questa applicazione <br>
 * <p>
 * Annotated with @SpringComponent (obbligatorio) <br>
 * Annotated with @Scope (obbligatorio) <br>
 * Annotated with @AIScript (facoltativo) per controllare la ri-creazione di questo file nello script di algos <br>
 */
@SpringComponent
@Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)
@AIScript(sovrascrivibile = false)
public class @MODULEUPPER@Boot extends ABoot {

    public final static String PROJECT_NAME = "Vaadwam";
    public final static String PROJECT_VERSION = "0.3";
    public final static String DEMO_COMPANY_CODE = "demo";


    @Autowired
    private UtenteService utenteService;

    @Autowired
    private ALogin login;

    @Autowired
    private CompanyService companyService;


    /**
     * Iniettata dal costruttore <br>
     */
    private @MODULEUPPER@VersBoot @MODULELOWER@VersBoot;


    /**
     * Costruttore @Autowired <br>
     *
     * @param wamVersBoot Log delle versioni, modifiche e patch installat
     */
    @Autowired
    public @MODULEUPPER@Boot(@MODULEUPPER@VersBoot @MODULELOWER@VersBoot) {
        super();
        this.@MODULELOWER@VersBoot = @MODULELOWER@VersBoot;
    }// end of Spring constructor

    /**
     * Executed on container startup <br>
     * Setup non-UI logic here <br>
     * Viene sovrascritto in questa sottoclasse concreta che invoca il metodo super.inizia() <br>
     * Nella superclasse vengono effettuate delle regolazioni standard; <br>
     * questa sottoclasse concreta pu√≤ singolarmente modificarle <br>
     */
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        super.inizia();
    }// end of method


    /**
     * Inizializzazione dei dati di alcune collections specifiche sul DB Mongo
     */
    protected void iniziaDataProgettoSpecifico() {
    }// end of method


    /**
     * Inizializzazione delle versioni del programma specifico
     */
    protected void iniziaVersioni() {
        wamVersBoot.inizia();
    }// end of method


    /**
     * Regola alcune informazioni dell'applicazione
     */
    protected void regolaInfo() {
        super.regolaInfo();
//        footer.project = "Vaadwam";
//        footer.version = "0.2";
//        footer.data = LocalDate.of(2018, 8, 1);
    }// end of method


    /**
     * Regola alcune preferenze iniziali
     * Se non esistono, le crea
     * Se esistono, sostituisce i valori esistenti con quelli indicati qui
     */
    protected void regolaPreferenze() {
        super.regolaPreferenze();
//        pref.setBool(FlowCost.USA_COMPANY, true);
    }// end of method


    /**
     * Aggiunge le @Route (view) specifiche di questa applicazione
     * Le @Route vengono aggiunte ad una Lista statica mantenuta in BaseCost
     * Vengono aggiunte dopo quelle standard
     * Verranno lette da MainLayout la prima volta che il browser 'chiama' una view
     */
    protected void addRouteSpecifiche() {
        FlowCost.MENU_CLAZZ_LIST.add(Xxx.class);
    }// end of method


}// end of boot class